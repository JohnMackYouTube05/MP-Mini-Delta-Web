<html><head><script type="text/javascript" src="http://malyansys.com/js/pack.js"></script><script src="http://malyansys.com/js/dropzone.js"></script><link rel="stylesheet" href="http://malyansys.com/js/pack.css"/><script>function pad(num, size) {var s = "000" + num;return s.substr(s.length-size);}$(document).ready(function(){setInterval(function() {$.get("inquiry",function(data,status){$("#rde").text(data.match(/\d+/g)[0]);$("#rdp").text(data.match(/\d+/g)[2]);var c=data.charAt(data.length-1);if (c=='I'){$("#stat").text("Status: Idle");$("#pgs").css("width","0%");}else if (c=='P'){$("#stat").text("Status: Printing");$("#pgs").css("width",data.match(/\d+/g)[4]+"%");}else $("#stat").text("Status: ");});}, 3000);$("#sete").click(function(){var value=pad($("#wre").val(),3);$.ajax({url: 'set?cmd={C:T0'+value+'}',cache: false}).done(function(html) {});});$("#clre").click(function(){$.ajax({url: "set?cmd={C:T0000}",cache: false}).done(function(html) {});});$("#setp").click(function(){var value=pad($("#wrp").val(),3);$.ajax({url: 'set?cmd={C:P'+value+'}',cache: false}).done(function(html) {});});$("#clrp").click(function(){$.ajax({url: "set?cmd={C:P000}",cache: false}).done(function(html) {});});});String.prototype.contains = function(it) { return this.indexOf(it) != -1; };Dropzone.options.mydz = {dictDefaultMessage: "Upload GCode here",accept: function(file, done) {if (file.name.contains(".g")) done();else done("Not a valid GCode file.");},init: function() {this.on('error', function(file, response) {var errorMessage = response.errorMessage;$(file.previewElement).find('.dz-error-message').text(errorMessage);});this.on("addedfile", function() {if (this.files[1]!=null){this.removeFile(this.files[0]);}});}};function start_p(){$.ajax({url: "set?code=M565",cache: false}).done(function(html) {});}function cancel_p(){$.ajax({url: "set?cmd={P:X}",cache: false}).done(function(html) {});}</script></head><body><br></br><div class="container-fluid"><div class="row"><div class="col-md-8"><div class="hero-unit well"><h1>Desktop 3D Printer&nbsp;&raquo;    </h1></div><div class="row"><div class="col-md-6"><div id="dropzone"><form action="/upload" class="dropzone" id="mydz"/></div><div class="row"><div class="col-md-6"><button class="btn btn-success btn-block" type="button" onclick="start_p()">Start print</button></div><div class="col-md-6"><button class="btn btn-danger btn-block" type="button" onclick="cancel_p()">Cancel print</button></div></div></div><div class="col-md-6"><B><p id="stat">Status:</p></B><div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" id="pgs"></div></div><table class="table table-hover table-bordered"><thead><tr><th></th><th>Temperature</th><th>Target</th></tr></thead><tbody><tr class="info"><td><strong>Extruder</strong></td><td id="rde">NA</td><td><div class="btn-group" role="group"><input class="form-control" type="text" id="wre"/><button class="btn btn-default" type="button" id="sete">SET</button><button class="btn btn-default" type="button" id="clre">OFF</button></div></td></tr><tr class="info"><td><strong>Platform</strong></td><td id="rdp">NA</td><td><div class="btn-group" role="group"><input class="form-control" type="text" id="wrp"/><button class="btn btn-default" type="button" id="setp">SET</button><button class="btn btn-default" type="button" id="clrp">OFF</button></div></td></tr></tbody></table></div><div class="col-md-4"></div></div></div></div></div></body></html>
